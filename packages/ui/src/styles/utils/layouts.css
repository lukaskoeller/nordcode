@layer utils {
    /* Layout classes that handle 80% of the layout*/
    .nc-box {
        padding: var(--spacing-base);

        &.-bordered {
            border: var(--border-width-thin) solid var(--color-border-default);
            border-radius: var(--border-radius-medium);
        }
    }

    .nc-stack {
        --_stack-gap: var(--stack-gap, var(--spacing-base));
        --_stack-flex-direction: var(--stack-flex-direction, column);
        --_stack-flex-wrap: var(--stack-flex-wrap, no-wrap);

        display: flex;
        flex-direction: var(--_stack-flex-direction);
        flex-wrap: var(--_stack-flex-wrap);
        gap: var(--_stack-gap);
        align-items: flex-start;

        &.-near {
            --stack-gap: var(--spacing-near);
        }

        &.-stretched {
            inline-size: 100%;

            & > * {
                inline-size: 100%;
            }
        }
    }

    .nc-flow > * + * {
        margin-block-start: var(--flow-gap, var(--spacing-base));
    }

    .nc-flow > *:is(h1, h2, h3, h4, h5, h6) {
        --flow-gap: var(--spacing-far);
    }

    .nc-flow > *:is(h1, h2, h3, h4, h5, h6) + p {
        --flow-gap: var(--spacing-near);
    }

    .nc-flow > p + p {
        --flow-gap: var(--spacing-base);
    }

    .nc-flow > figure {
        margin-inline: 0;
    }

    .nc-flow .breakAfter {
        margin-block-end: auto;
    }

    .section {
        padding-block: var(--spacing-base);
        padding-inline: var(--spacing-base);

        @media (--sm-n-above) {
            padding-block: var(--spacing-far);
            padding-inline: var(--spacing-far);
        }

        @media (--md-n-above) {
            padding-block: var(--spacing-farthest);
            padding-inline: var(--spacing-farthest);
        }
    }

    .nc-center {
        --_center-measure: var(--center-measure, 0);
        --_center-padding: var(--center-padding, 0);

        box-sizing: content-box;
        margin-inline: auto;
        max-inline-size: var(--measure);
        padding-inline: var(--_center-padding);
    }

    .nc-cluster {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: var(--cluster-gap, var(--spacing-base));
        align-items: flex-start;

        &.-centered {
            align-items: center;
        }

        &.-nowrap {
            flex-wrap: nowrap;
        }
    }

    .nc-with-sidebar {
        --with-sidebar-min-size: 50%;

        width: 100%;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: var(--with-sidebar-gap, var(--spacing-far));

        & > [data-aside] {
            flex-grow: 1;
            min-width: min-content;
        }

        & > [data-grow] {
            flex-basis: 0;
            flex-grow: 999;
            min-width: var(--with-sidebar-min-size);
        }
    }

    .-full-width {
        inline-size: 100%;
    }

    .nc-centered-content {
        display: grid;
        place-items: center;
    }
}
